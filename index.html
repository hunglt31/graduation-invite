<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thi·ªáp m·ªùi t·ªët nghi·ªáp</title>
  <style>
    :root{
      --accent:#5B21B6;
      --bg:linear-gradient(135deg,#f7f7fb 0%,#fff 40%);
      --card-bg: rgba(255,255,255,0.75);
      --soft:#6b7280;
      --shadow: 0 10px 30px rgba(16,24,40,0.08);
      --radius:18px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:var(--bg);display:flex;align-items:center;justify-content:center;padding:36px;color:#0f172a}

    .wrap{width:100%;max-width:980px;display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:center}
    .hero{padding:36px;border-radius:22px;background:var(--card-bg);backdrop-filter:blur(6px);box-shadow:var(--shadow);}
    .logo{display:flex;gap:12px;align-items:center}
    .badge{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#ef4444);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{margin:18px 0 4px;font-size:28px}
    p.lead{margin:0;color:var(--soft)}

    .card{background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(245,247,250,0.6));border-radius:16px;padding:20px;margin-top:22px}

    .invitation{display:flex;flex-direction:column;gap:10px;margin-top:16px}
    .names{font-family:Georgia, 'Times New Roman', serif;font-size:26px;color:var(--accent)}
    .meta{color:var(--soft)}

    .controls{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap}
    button, .btn{border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.06)}

    .side{padding:28px;border-radius:22px;background:repeating-linear-gradient(135deg,rgba(250,250,255,0.9),rgba(250,250,255,0.9) 20px, rgba(245,245,250,0.7) 20px);box-shadow:var(--shadow)}
    .preview{height:420px;border-radius:12px;overflow:hidden;background-image:linear-gradient(180deg,rgba(91,33,182,0.06),rgba(239,68,68,0.03));display:flex;align-items:center;justify-content:center;flex-direction:column;padding:22px}
    .preview .title{font-size:20px;font-weight:700;color:var(--accent)}
    .preview .sub{color:var(--soft)}

    .wish-modal{position:fixed;left:0;top:0;width:100%;height:100%;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:60}
    .wish-card{width:100%;max-width:520px;background:white;padding:20px;border-radius:12px;box-shadow:0 20px 50px rgba(2,6,23,0.4)}
    label{display:block;margin-top:12px;font-size:13px;color:#111827}
    input[type=text],textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e7eb;margin-top:6px}

    .top-actions{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .muted{color:var(--soft);font-size:13px}

    footer{margin-top:18px;color:var(--soft);font-size:13px}

    @media (max-width:900px){
      .wrap{grid-template-columns:1fr;}
      .side{order:-1}
      .preview{height:320px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="hero">
      <div class="logo">
        <div class="badge">TN</div>
        <div>
          <div class="muted">Thi·ªáp m·ªùi</div>
          <h1 contenteditable id="title">Thi·ªáp m·ªùi t·ªët nghi·ªáp</h1>
          <p class="lead" contenteditable id="subtitle">Xin tr√¢n tr·ªçng k√≠nh m·ªùi qu√Ω th·∫ßy c√¥, gia ƒë√¨nh v√† b·∫°n b√® ƒë·∫øn d·ª± l·ªÖ t·ªët nghi·ªáp.</p>
        </div>
      </div>

      <div class="card">
        <div class="invitation">
          <div class="muted">Ng∆∞·ªùi m·ªùi</div>
          <div class="names" contenteditable id="name">Nguy·ªÖn VƒÉn A</div>

          <div class="muted">S·ª± ki·ªán</div>
          <div class="meta" contenteditable id="event">L·ªÖ t·ªët nghi·ªáp - ƒê·∫°i h·ªçc B√°ch Khoa H√† N·ªôi</div>

          <div class="muted">Th·ªùi gian & ƒë·ªãa ƒëi·ªÉm</div>
          <div class="meta" contenteditable id="time">10:00 s√°ng, Ch·ªß nh·∫≠t, 12/10/2025 ‚Äî H·ªôi tr∆∞·ªùng l·ªõn, HUST</div>

          <div class="controls">
            <button class="btn btn-primary" id="openWish">G·ª≠i l·ªùi ch√∫c</button>
            <button class="btn btn-ghost" id="printBtn">T·∫£i / In (Print)</button>
            <button class="btn btn-ghost" id="saveBtn">L∆∞u c·ª•c b·ªô</button>
          </div>

          <footer>Ch·ªânh n·ªôi dung tr·ª±c ti·∫øp tr√™n thi·ªáp. Kh√°ch c√≥ th·ªÉ g·ª≠i t√™n v√† l·ªùi ch√∫c ƒë·ªÉ l∆∞u v√†o Google Sheets.</footer>
        </div>
      </div>
    </main>

    <aside class="side">
      <div class="preview" id="preview">
        <div class="title" id="pvTitle">Thi·ªáp m·ªùi t·ªët nghi·ªáp</div>
        <div class="sub" id="pvSubtitle">Xin m·ªùi ƒë·∫øn d·ª± l·ªÖ t·ªët nghi·ªáp</div>
        <div style="height:16px"></div>
        <div class="names" id="pvName">Nguy·ªÖn VƒÉn A</div>
        <div style="height:8px"></div>
        <div class="meta" id="pvMeta">10:00 ‚Äî 12/10/2025 ‚Äî H·ªôi tr∆∞·ªùng l·ªõn</div>
      </div>

      <div style="margin-top:14px">
        <div class="muted">H∆∞·ªõng d·∫´n</div>
        <ol style="padding-left:16px;margin-top:8px">
          <li>Click v√†o n·ªôi dung ƒë·ªÉ ch·ªânh s·ª≠a.</li>
          <li>Nh·∫•n "L∆∞u c·ª•c b·ªô" ƒë·ªÉ l∆∞u b·∫£n nh√°p trong tr√¨nh duy·ªát.</li>
          <li>Kh√°ch b·∫•m "G·ª≠i l·ªùi ch√∫c" ƒë·ªÉ g·ª≠i t√™n v√† l·ªùi ch√∫c c·ªßa h·ªç.</li>
        </ol>
      </div>
    </aside>
  </div>

  <!-- Wish modal -->
  <div class="wish-modal" id="wishModal">
    <div class="wish-card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">G·ª≠i l·ªùi ch√∫c</h3>
        <button id="closeWish" class="btn">‚úï</button>
      </div>
      <p class="muted">ƒêi·ªÅn t√™n v√† l·ªùi ch√∫c ƒë·ªÉ g·ª≠i ƒë·∫øn s·ªï l∆∞u ni·ªám.</p>
      <label for="guestName">T√™n</label>
      <input type="text" id="guestName" placeholder="T√™n c·ªßa b·∫°n" />
      <label for="guestWish">L·ªùi ch√∫c</label>
      <textarea id="guestWish" rows="3" placeholder="Nh·∫≠p l·ªùi ch√∫c..."></textarea>
      <div style="display:flex;gap:10px;margin-top:14px;justify-content:flex-end">
        <button id="sendWish" class="btn btn-primary">G·ª≠i</button>
        <button id="cancelWish" class="btn btn-ghost">H·ªßy</button>
      </div>
    </div>
  </div>

  <script>
    const fields = ['title','subtitle','name','event','time'];
    function updatePreview(){
      document.getElementById('pvTitle').innerText = document.getElementById('title').innerText;
      document.getElementById('pvSubtitle').innerText = document.getElementById('subtitle').innerText;
      document.getElementById('pvName').innerText = document.getElementById('name').innerText;
      document.getElementById('pvMeta').innerText = document.getElementById('time').innerText;
    }
    function saveLocal(){
      const data = {};
      fields.forEach(f=> data[f] = document.getElementById(f).innerText);
      localStorage.setItem('invite-data', JSON.stringify(data));
      alert('ƒê√£ l∆∞u v√†o b·ªô nh·ªõ tr√¨nh duy·ªát.');
    }
    function loadLocal(){
      const raw = localStorage.getItem('invite-data');
      if(!raw) return;
      try{const data = JSON.parse(raw); fields.forEach(f=>{ if(data[f]) document.getElementById(f).innerText = data[f] }); updatePreview(); }catch(e){}
    }

    fields.forEach(f=> document.getElementById(f).addEventListener('input', updatePreview));
    document.getElementById('saveBtn').addEventListener('click', saveLocal);
    window.addEventListener('load', ()=>{loadLocal(); updatePreview();});

    document.getElementById('printBtn').addEventListener('click', ()=>{ window.print(); });

    // Wish modal
    const wishModal = document.getElementById('wishModal');
    document.getElementById('openWish').addEventListener('click', ()=> wishModal.style.display='flex');
    document.getElementById('closeWish').addEventListener('click', ()=> wishModal.style.display='none');
    document.getElementById('cancelWish').addEventListener('click', ()=> wishModal.style.display='none');

    // Replace with your Google Apps Script Web App URL
    const SCRIPT_URL = "YOUR_WEB_APP_URL";

    document.getElementById('sendWish').addEventListener('click', async ()=>{
      const name = document.getElementById('guestName').value.trim();
      const wish = document.getElementById('guestWish').value.trim();
      if(!name || !wish){alert("Vui l√≤ng nh·∫≠p t√™n v√† l·ªùi ch√∫c!");return;}
      try{
        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({ name, wish }),
          headers: {"Content-Type":"application/json"}
        });
        if(res.ok){
          alert("C·∫£m ∆°n! L·ªùi ch√∫c c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i üéâ");
          document.getElementById('guestName').value="";
          document.getElementById('guestWish').value="";
          wishModal.style.display='none';
        } else {
          alert("Xin l·ªói, g·ª≠i kh√¥ng th√†nh c√¥ng.");
        }
      }catch(e){alert("L·ªói k·∫øt n·ªëi.");}
    });

    window.addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='s'){ e.preventDefault(); saveLocal(); }});
  </script>
</body>
</html>

